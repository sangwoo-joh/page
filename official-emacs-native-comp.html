<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-site-verification" content="fgTBOMeN_sdI4JNBqYTzDwH0458H8AAVbF78jLjwudg" />
  <script type="text/javascript" src="/assets/vendor/moment.min.js"></script>
  <script type="text/javascript" src="/assets/js/site.js"></script>
  <!-- <script src="https://unpkg.com/cursor-effects@latest/dist/browser.js"></script> -->

  <title>
    
      Emacs Native Compliation
    
  </title>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Emacs Native Compliation" />
<meta name="author" content="sangwoo-joh" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="몰랐는데 Andrea Corallo 님께서 작업하신 이맥스 native compilation 브랜치가 master 브랜치에 머지되었다는 소식을 보았다. GNU 로그를 보니 진짜다. 당장 써보자." />
<meta property="og:description" content="몰랐는데 Andrea Corallo 님께서 작업하신 이맥스 native compilation 브랜치가 master 브랜치에 머지되었다는 소식을 보았다. GNU 로그를 보니 진짜다. 당장 써보자." />
<link rel="canonical" href="https://sangwoo-joh.github.io/official-emacs-native-comp" />
<meta property="og:url" content="https://sangwoo-joh.github.io/official-emacs-native-comp" />
<meta property="og:site_name" content="Caml Shaving" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-18T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Emacs Native Compliation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"sangwoo-joh"},"dateModified":"2022-03-18T00:00:00+00:00","datePublished":"2022-03-18T00:00:00+00:00","description":"몰랐는데 Andrea Corallo 님께서 작업하신 이맥스 native compilation 브랜치가 master 브랜치에 머지되었다는 소식을 보았다. GNU 로그를 보니 진짜다. 당장 써보자.","headline":"Emacs Native Compliation","mainEntityOfPage":{"@type":"WebPage","@id":"https://sangwoo-joh.github.io/official-emacs-native-comp"},"url":"https://sangwoo-joh.github.io/official-emacs-native-comp"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="https://sangwoo-joh.github.io/feed.xml" title="Caml Shaving" />

  <link rel="apple-touch-icon" sizes="57x57" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://sangwoo-joh.github.io/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="https://sangwoo-joh.github.io/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://sangwoo-joh.github.io/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://sangwoo-joh.github.io/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://sangwoo-joh.github.io/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="https://sangwoo-joh.github.io/assets/icons/manifest.json">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Ubuntu" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="https://sangwoo-joh.github.io/assets/css/main.css" />
  <link rel="stylesheet" href="https://sangwoo-joh.github.io/assets/css/syntax.css" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J0C68FHJ6L"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J0C68FHJ6L');
</script>


</head>
<body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="https://sangwoo-joh.github.io">/home/caml-shaving</a>
<center>
<h1>Emacs Native Compliation</h1>
<h2>Official!</h2>
</center>

<div class="post-edit-date">
  
  2022-03-18
</div>

<div class="post-edit-date">
  
  
</div>

<em><p align="right">

태그:



<a href="/archive?tag=dev"><span class="tag">dev</span></a>




</p></em>


<p>몰랐는데 Andrea Corallo 님께서 작업하신 이맥스 native compilation
 브랜치가 <a href="https://www.reddit.com/r/emacs/comments/myej3z/the_nativecompilation_branch_was_just_merged_into/">master 브랜치에 머지되었다는
 소식</a>을
 보았다. GNU 로그를 보니
 <a href="https://git.savannah.gnu.org/gitweb/?p=emacs.git;a=commit;h=289000eee729689b0cf362a21baa40ac7f9506f6">진짜</a>다. 당장 써보자.</p>

<p>일단 <code class="language-plaintext highlighter-rouge">configure</code> 옵션이 <a href="emacs-native-comp">기존 feature 브랜치</a>와 좀
 달라졌다: <code class="language-plaintext highlighter-rouge">./configure --with-native-compilation</code> 을 해야
 한다. 나머지는 똑같다. GCC-10과 libgccjit 디펜던시를 설치하고 CC와
 CXX를 적절하게 설정해둔 뒤 <code class="language-plaintext highlighter-rouge">./autogen.sh</code> 후 <code class="language-plaintext highlighter-rouge">./configure
 --with-native-compilation</code> 하고 빌드하면 된다. 그런데 <code class="language-plaintext highlighter-rouge">master</code>
 브랜치를 곧바로 시도했더니 빌드 실패가 뜬다(?). 아마 다른 기능들까지
 반영되어서 내 로컬에서는 빌드가 깨지는 듯 하다. 침착히 찾아보니
 <code class="language-plaintext highlighter-rouge">emacs-28.0.50</code> 기준으로 반영이 된 것 같다. <code class="language-plaintext highlighter-rouge">tag</code>를 보니
 <code class="language-plaintext highlighter-rouge">emacs-28.0.90</code>, <code class="language-plaintext highlighter-rouge">emacs-28.0.91</code>, <code class="language-plaintext highlighter-rouge">emacs-28.0.92</code>가
 있었다. 흐음. <code class="language-plaintext highlighter-rouge">emacs-28.0.92</code>를 빌드 시도해보았다. 안된다. <code class="language-plaintext highlighter-rouge">make</code>로
 병럴 작업 없이 시도해보았다. 안된다. <code class="language-plaintext highlighter-rouge">emacs-28.0.90</code>으로
 시도해보았다. <code class="language-plaintext highlighter-rouge">make -j5</code>로 잡을 5개나 주었는데 대략 8분정도 걸려서
 빌드에 성공하였다.</p>

<p>빌드 후 인스톨해서 켜보니 예상과는 다르게 엄청나게 오랜 시간 동안
 로딩을 진행하였다. 뭐 때문인지 <code class="language-plaintext highlighter-rouge">htop</code>으로 작업을 살펴보니 기존에
 빌드해둔 <code class="language-plaintext highlighter-rouge">eln</code> 들을 싹 무시하고 처음부터 새로 다시 빌드하고
 있었다. 그럴 수 있지. 적절한 시간이 흐르고 네이티브 컴파일레이션이
 끝나고 나니 다시 원래의 이맥스로 돌아왔다. 이미 네이티브를 쓰고
 있어서 크게 체감은 안되지만, 정식으로 메인 브랜치에 반영되었으니 이제
 안심하고 써도 되겠다. 레딧 댓글을 보니 28 공식 버전에는 디폴트로
 네이티브가 들어간다고 하는데 기대된다.</p>


<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<br />

<div>
  <script src="https://giscus.app/client.js"
          data-repo="sangwoo-joh/reactions"
          data-repo-id="R_kgDOJFNVQw"
          data-category="Comments"
          data-category-id="DIC_kwDOJFNVQ84CUox9"
          data-mapping="pathname"
          data-strict="1"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="light_high_contrast"
          data-lang="ko"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>
</div>

<br />

      </div>
    </main>

    
    <footer>
  <a href="/feed.xml">rss</a>
  <a href="mailto:work.sangwoo.joh@gmail.com">mail</a>
  <a href="https://www.linkedin.com/in/sangwoo-joh">linkedin</a>
  <a href="https://github.com/sangwoo-joh">github</a>
  <p class="copyright text-muted">Copyright &copy; sangwoo-joh 2023</p>
  <small><a target="_blank" href="https://icons8.com/icons/set/--camel">Camel icon</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a></small>
</footer>

  </body>
</html>
